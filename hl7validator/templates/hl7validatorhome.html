<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>HL7 Validator</title>
    <link href="/static/bootstrap.min.css" rel="stylesheet" media="screen">

    <link href="/static/mystyle.css" rel="stylesheet" media="screen">

</head>

<body>
<div class="container-fluid px-5">
    <div class="row align-items-center">
        <div class="col-2">
            <img style="float:left; width:70%;" src="/static/hl7pt.png" class="rounded float-left" alt="HL7PT">
        </div>
        <div class="col-10">
            <h1>HL7 V2 Validation Tool <a style="font-size:x-small">Version: {{version}}</a></h1>
        </div>

    </div>

    <form method="POST" role="form">
        <div class="form-group">
            <label for="exampleFormControlTextarea1">
                <h3>Use this form to validate your HL7 content</h3>
            </label>

            <div class="row align-items-center">
                <div class="col-lg-2 "><label class="radio-inline"><input type="radio" name="options" value="hl7v2"
                                                                          checked> HL7
                    V2</label></div>
               
                <div class="col-lg-3">
                    <label class="radio-inline"><input type="radio" name="options" value="converter"> HL7 V2 Converter
                        to CSV</label>
                </div>
            </div>
            <textarea class="form-control" id="exampleFormControlTextarea1" name="msg" rows="7">{{ msg }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
        <button type="button" class="btn btn-secondary" onclick="clearContent()">Clear Content</button>
        <p>Want as an api? check <a href="/apidocs">here</a></p>
    </form>
    <br>

    {% if title %}
    <h2>{{ title }}</h2>
    {% endif %}
    {% if parsed %}

        <p>
          <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
            Click to see parsed message
          </a>
        </p>
        <div class="collapse" id="collapseExample">
          <div class="card card-body">
            {% if hl7version %}
            <p>For more info on the, check <a href="https://hl7-definition.caristix.com/v2/HL7v{{hl7version}}" target="_blank"> the {{hl7version}} spec here</a>. Or click with Segment to see the Segment Spec.</p>
            {% endif %}
            {{parsed|safe}}

          </div>
        </div>

      <br>
    {% endif %}
   

    {% if result %}

    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>

            <th scope="col">Level</th>
            <th scope="col">Message</th>

        </tr>
        </thead>
        <tbody>
        {% for foo in result %}
        <tr >
            <th scope="row">{{loop.index}}</th>

            <td class="{{foo["level"]}}level">{{ foo["level"] }}</td>
            <td>{{ foo["message"] }}</td>

        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
<footer>
</footer>
<script>
    function clearContent() {
        document.getElementById('exampleFormControlTextarea1').value = '';
    }
    </script>
</html>